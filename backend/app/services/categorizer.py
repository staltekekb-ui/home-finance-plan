"""Автоматическое определение категории по описанию транзакции."""

CATEGORY_KEYWORDS = {
    "Еда": [
        "пятёрочка", "пятерочка", "магнит", "лента", "перекрёсток", "перекресток",
        "дикси", "ашан", "метро", "окей", "вкусвилл", "азбука вкуса", "мясо",
        "продукты", "супермаркет", "гипермаркет", "grocery", "food"
    ],
    "Транспорт": [
        "яндекс.такси", "яндекс такси", "uber", "убер", "ситимобил", "gett",
        "такси", "метро", "мосметро", "ржд", "аэрофлот", "s7", "победа",
        "бензин", "азс", "лукойл", "газпром", "роснефть", "shell", "bp",
        "каршеринг", "делимобиль", "яндекс драйв", "парковка"
    ],
    "Развлечения": [
        "кино", "cinema", "театр", "концерт", "netflix", "spotify", "youtube",
        "кинопоиск", "ivi", "okko", "амедиатека", "steam", "playstation", "xbox",
        "боулинг", "бильярд", "клуб", "бар", "паб"
    ],
    "ЖКХ": [
        "жкх", "квартплата", "электричество", "мосэнерго", "водоканал", "газ",
        "отопление", "капремонт", "управляющая компания", "интернет", "ростелеком",
        "мтс", "билайн", "мегафон", "теле2", "связь"
    ],
    "Здоровье": [
        "аптека", "ригла", "горздрав", "36.6", "pharmacy", "поликлиника",
        "больница", "врач", "стоматолог", "анализы", "медицина", "здоровье"
    ],
    "Покупки": [
        "ozon", "wildberries", "wb", "aliexpress", "amazon", "dns", "мвидео",
        "м.видео", "эльдорадо", "ситилинк", "икеа", "ikea", "леруа", "leroy",
        "одежда", "обувь", "zara", "h&m", "uniqlo", "спортмастер"
    ],
    "Образование": [
        "курс", "обучение", "школа", "университет", "книга", "литрес",
        "skillbox", "нетология", "geekbrains", "coursera", "udemy"
    ],
    "Кафе и рестораны": [
        "ресторан", "кафе", "кофе", "кофейня", "starbucks", "старбакс",
        "макдоналдс", "mcdonalds", "бургер кинг", "kfc", "сушишоп", "суши",
        "пицца", "додо", "папа джонс", "кофемания", "шоколадница"
    ],
}


def categorize(description: str) -> str | None:
    """Определяет категорию по описанию транзакции."""
    description_lower = description.lower()

    for category, keywords in CATEGORY_KEYWORDS.items():
        for keyword in keywords:
            if keyword in description_lower:
                return category

    return None


# Mock категории для тестирования
MOCK_CATEGORIES = {
    "Пятёрочка": "Еда",
    "Яндекс.Такси": "Транспорт",
    "Ozon": "Покупки",
    "Лента": "Еда",
    "Аптека Ригла": "Здоровье",
    "DNS": "Покупки",
    "Кофемания": "Кафе и рестораны",
    "МВидео": "Покупки",
}
